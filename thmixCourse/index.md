# THMix教程 Ver2.1.0　Preview | 2021.11.13

## 本教程于[[Creative Commons - 署名-非商业性使用-相同方式共享 3.0 (CC BY-NC-SA 3.0)](https://creativecommons.org/licenses/by-nc-sa/3.0)]下提供，转载请标明出处

### 教程还需要大量修改，有错误请指出（发送邮件至[zhaoym233@hotmail.com]）

---

<span id="menu"></span>

## 目录

- [前言](#0)

- [第一部分 官网](#1)

- [第二部分 UI及游戏机制](#2)

- - 游戏UI

- - - [调试面板]

- - - [专辑界面]

- - - [商店界面]

- - - [Midi信息界面]

- - - [音轨界面]

- - - [歌曲结算界面]

- - [总设置→](mainSetting/)

- - - 关于翻译

- - [游戏设置→](gameSetting/)

- - - 关于RGB颜色

- [第三部分 文件](#3)

- - 关于游戏文件

- - - 文件储存

- - - Midi导入

- - - - 关于Midi

- - - 音源导入

- - - - 关于音源

- - - 皮肤制作

- - - 皮肤导入

- [第四部分 常见问题](#4)

---

<span id="0"></span>

## 前言

- 若想快速了解游戏设置，可以去看QQ群相册内图片教程

- 如果你遇到了问题，请查看第四部分，无解则入群询问

- 该教程适配α3.0.2.425版的Android版TouhouMix，兼容3.0.1.345版TouhouMix(目前Windows版)。Windows与IOS平台的TouhouMix中可能会缺少教程中提及的部分内容，但不影响教程使用。若发现读不懂教程请留意自己的TouhouMix的版本号

- 本教程中所有双引号("")及单引号('')都用于分隔说明文本与内容，便于理解，请勿将引号当作内容的一部分(例如文件路径)

- 本教程内所有"[xxx]"均表示内容需要替换，例如："[游戏文件目录]"需要将其替换为游戏文件目录

- 教程内提到的旧版均指比3.0.2.425旧的**近期版本**

- _[返回菜单](#menu)_

---

<span id="1"></span>

## 第一部分 官网

- 内容较多，单独置于[官网](./website/)页内

- _[返回菜单](#menu)_

---

<span id="2"></span>

## 第二部分 UI及游戏机制

- 游戏UI

- - 调试面板 在游戏中双指下滑可进入LunarConsole调式面板，会显示运行日志，在游戏运行出现Bug时可以查看日志，退出游戏后清空

- - 专辑界面 第一次进入TouhouMix或上次退出是界面为专辑界面时，启动游戏后显示专辑界面。专辑的排序方法是按建立的时间顺序排列，即最近下载的歌曲会被放到最下面(实际上由于某些bug导致专辑有时候并不能正常地排序)。若下载歌曲所属专辑已存在，则专辑排序不受影响

- - 屏幕上方(从左往右介绍)

- - - 网络延迟，然而不准，用来判断是否连接至服务器

- - - 点开后可以查看官网网址、QQ群号和加Discord群的链接的按钮

- - - 点开后可以查看当前游戏版本号和各平台/版本的最新版本号(然而官网的版本数据似乎没有更新)

- - - 总设置按钮，点击进入总设置

- - - 登录窗口，登录后显示内容变为头像，点击可查看用户名，用户名左边显示的是当前账号的总pp值、等级和升级进度，等级的计算方式为`总pp ^ 2`

- - 商店界面

- - - 在专辑界面点击屏幕右下角(立绘下方)的按钮进入商店界面。

- - - 左上角搜索栏可用于搜索歌曲，搜索时关键词必需完整(如搜"touhou"不能只打"th"，搜"东方"不能只打"东")，关键词间用半角标点或空格隔开，若搜索多个关键词，则会搜出带关键词中至少一个的所有曲目。可被搜索的内容包括:简介内容、上传者、曲目作者、Midi名字

- - - 商店中会显示出所有已被上传至官网的Midi，即使Midi的状态为dead

- - - 在Midi信息框中，文字内容从上到下显示的分别为:曲名，曲目作者、上传者、原曲所属专辑、原曲名字

- - - Midi信息框右下角显示的是当前Midi的下载状态，若显示圆圈里带✓即为已下载，若显示个云则为点击可下载，下载时会显示下载进度百分比

- - - 商店最新一页为第0页，翻到页面底部可点击按钮翻页或输入页码跳转

- - - 一个页面最多显示30个歌曲，最少显示1个歌曲，当显示数量为单数时，最后的那个歌曲的框会遭到无情拉长

- - Midi信息页面

- - - 选择专辑和歌曲后，进入Midi信息界面

- - - 游戏难度选择框位于Midi界面的屏幕左上角，点开后可选择难度，难度从上到下依次递增，而Custom为自定义难度，调成此难度后设置内影响难度的部分设置(游戏设置中第23～27项)才允许被更改，自身没有默认难度。其它难度均会锁定部分设置项，新人不建议选择Custom

- - - beginner到lunatic分别会把[游戏设置-第7栏-第3-7项](gameSetting/##7)的数值分别改为:

|难度|7-3 Max Simultaneous Blocks|7-4 Min Tap Interval|7-5 Min Touch Cooldown Time|7-6 Max Touch Move Speed|7-7 Max Block Coalesce Time|
|----|----|----|----|----|----|
|Beginner|1|1|2|200|2|
|Easy|2|1|2|200|1|
|Normal|2|1|2|300|0.25|
|Hard|2|1|2|300|0.05|
|Lunatic|2|0.2|1.5|400|0.05|

- - - 关于游戏模式

- - - - 游戏模式选择框位于难度选框的右边，目前只有一个可用模式

- - - - ScanningLine模式曾经推出过，玩法为当判定线移至音符时点击。但最后被移除，目前在某个特定的版本可玩到此模式

- - - 关于Midi信息框

- - - - 屏幕左下方的框是Midi的基本信息框，框内显示了Midi的封面、名字、上传者，Midi的游玩、下载、点赞和收藏数，以及Midi的ID

- - - - 关于排名与评分

- - - - - Midi基本信息框的下方是此Midi的排行榜，排行榜的第一位是#0，排行榜根据玩家的pp值来进行排序

- - - - - pp值(performance point)计算公式: `ln(1+[总分数])×acc^2`

- - - - - 排行榜玩家左下方显示的彩色数字是此玩家pp最高的一次的perfect、great、good、bad、miss量

- - - - - 右下角显示的分别为玩家的分数，MaxCombo，ACC

- - - - - 右侧显示的为评分等级。评分等级仅根据ACC给出，与总分和pp无直接关系

- - - 关于下落的音符

- - - - 教程中出现的"音符"指的是谱面中short、instant与long

- - - - "short"指的是下落到判定线时需要点击的音符

- - - - "instant"指的是下落到判定线时需要点击或手指划过(不是点划)的音符

- - - - "long"指的是落到判定线上需要玩家长按并在其结束时准时松手的音符，在按住long时可以左右移动手指来移动long，若long结束时没有准时松手，则尾判处只得一分

- - - - 每增加1Combo(划过的instant除外)获得的分数为: `100×[连击加成]×[准确度权重]`

- - - - - 连击加成：`0.0809 + 0.199 In([连击数])`

- - - - - 准确度权重：`1.06 e ^ -7.17 × [Note偏移时间]`

- - -  关于简介及评论

- - - - 点击排行榜上方小按钮可切换至简介和评论区。简介下面的按钮点击后可前往Midi原出处或它在游戏官网上的详细界面(会跳转到浏览器)

- - - - 在评论区发表评论需要游戏评分达到一定程度(具体多少没试)，但在官网上只需登录并通过人机验证即可发表评论。评论区中的评论的字体大小会根据评论字数自动调整
- - - - 若[总设置-第2项](mainSetting/)有开启，则评论内容会被翻译

- -  音轨界面

- - - 当处于Midi信息页面时，屏幕左下角的返回键的右边是进入Midi的音轨界面的按钮。

- - - 在音轨界面里，点击音轨上的选框可以更改音轨音色，更改音色的操作有时需要退出音轨界面并重进才能生效(bug)，有时无法正确更改音色(bug)

- - - 点击选框旁的小喇叭可以静音此音轨，点击小麦克风可让其它音轨静音，仅让当前音轨播放，再次点击可恢复

- - - 点击喇叭和麦克风图标左侧按钮可以选择是否开启此音轨，选择后该音轨的音符将会生成

- - 歌曲结算界面

- - - 歌曲播放结束后进入的界面为歌曲结算界面。

- - - 屏幕右端三个按钮从上往下分别为：收藏、点赞和踩，上方有一网络延迟显示。

- - - 屏幕右下角的按钮从左往右分别为重新上传成绩(当成绩上传失败时会出现该按钮，点击后消失，无论是否成功)、随机切歌、顺序切歌(点此按钮会开始当前歌曲的下一歌曲，歌曲根据专辑列表的顺序排列)、重播和返回

- - - 左上角显示的是当前成绩的上传状态

- - - 屏幕左下角显示的是原曲名

- - - 立绘右边的区域从上往下、从左往右显示的分别是:

- - - - 选择的难度、曲名;

- - - - 总得分、pp值;

- - - - 评分等级、平均准确度、最大连击数;

- - - - perfect、great、good、bad、miss数量;

- - - - great中的early和late数量和ATE和STE。

- - - - -  ATE应为Average Time Early，表示的是玩家的Great中离点中perfect的平均提前值

- - - - -  STE应为Standard Time Early，表示的是玩家的Great中离点中perfect的平均提前值的标准差

- - -  关于

- - - - 角色立绘显示在专辑界面右端及结算界面左端，无法自行更换，只会通过最新一局游戏的评分等级自动切换，默认是琪露诺

- - - - Ω评分是八云紫；S，SS和SSS评分是幽幽子；A评分是灵梦；B评分是魔理沙；C评分是蕾米莉亚；D是古明地恋；F是琪露诺

- 因为内容过长，所以将[总设置](mainSetting/)与[游戏设置](gameSetting/)置于单独的文件中

- _[返回菜单](#menu)_

---

<span id="3"></span>

## 第三部分   文件

-  关于游戏文件目录

- - 在Android系统下，游戏文件目录路径为

    "`[内部储存]/Android/data/kailang.touhoumix/files`"

- - 在Windows系统下，游戏文件目录路径为

	"`[系统盘符]\Users\[计算机用户名]\AppData\LocalLow\Kailang Fu\Touhou Mix`"

- - 如果你在MacOS X，GNU/Linux，BSD等类Unix系统上使用Wine兼容层游玩Windows版本，那么游戏文件相对目录会是

	"`~/.wine/drive_[系统盘符]/users/[用户名]，/AppData/LocaleLow/Kailang\ Fu/Touhou\ Mix/`"

- - iOS更改游戏目录需要越狱，然而没有谁有越狱吧？所以iOS用户请跳过该部分内容

- - 温馨提示

- - - Windows系统需在文件管理器中勾选显示隐藏的文件才能找到文件夹

- - - "`[内部储存]`"(`/storage/emulated/0`)在不同文件管理器中显示的内容可能各不相同，可能也会显示为"`内部储存设备`"、"`手机储存`"、"`/sdcard`"等

-  文件储存

- - TouhouMix的大部分内容(包括Midi文件、设置参数和翻译文件等)都是储存`[游戏文件目录]`之中，所以这一小节针对该目录下的`Db`、`Webcache`和`skin`文件夹以及`JsonStorage`和`Translations.json`文件的内容进行简单介绍

- - `/Db`: Db，即数据库的英文缩写，该文件夹下有另外四个名字分别为`albums`、`Midis`、`persons`、`songs`的文件夹。分别用于储存游戏的专辑文件、Midi信息文件、已收录的作者信息文件和内置曲目信息文件，所用语言目测是json

- - - `./albums`: 该文件夹下储存着官网所有收录的(指在上传Midi时可选的专辑，主要为东方曲的专辑，除"`Seasons of Sky_yu`")专辑的信息文件，目前共46个

- - - - `./midis`: 该文件夹下存放着游戏内所有曲目的信息文件，游戏在加载歌曲列表的时候会将此目录下的所有文件读取，即使是你塞进去的，它们记录的曲目的所有信息。其中的内容的重要的几项的介绍如下:

- - - - - "`_id`":歌曲信息文件的ID，同时也是该文件的名字

- - - - - "`uploaderId`":midi上传者的ID编号

- - - - - "`uploaderName`":midi上传者的用户名

- - - - - "`name`":midi的名称

- - - - - "`desc`":midi的简介

- - - - - "`hash`":midi文件的文件名（或指midi文件的ID），在调用midi时游戏会调用在`Webcache`文件下的名字为此内容的文件，所以其实这ID是什么都可以，开心就好

- - - - - "`artistName`":midi作者名

- - - - - "`status`":midi的状态，显示在歌曲信息界面的歌曲封面的右上角

- - - `/Webcache`: 该文件夹下存放着的是所以已下载的Midi文件和已加载出来的专辑、歌曲封面和玩家头像等图片，歌曲信息文件在调用文件的时候都是调用此文件夹下的内容，所以这个文件夹并不像它名字那样听着好像可以随便删。其中文件名没有后缀名的均为Midi文件，其它的后缀名为.png的为游戏中使用的歌曲封面图、背景图和玩家头像图等`

- - - `/skins`: 该文件夹下储存的是按键皮肤及其文件夹，按键皮肤文件所处的文件夹的名称就是按键皮肤的名字

- - - `/Sf2`: 该文件夹用于存放导入的Soundfont文件

- - - `JsonStorage`: 此文件保存着上次游戏最后所处的位置、各个歌曲的音轨设置和设置项的数值等内容

- - - `Translations.json`: 该文件存储着已加载出来的所有翻译内容

- Midi导入`

- - 找到要导入的Midi，长按后选择打开方式，选择用TouHou MIX打开。

- - 找到要导入的Midi，将Midi复制或者剪切到`[游戏文件目录]`内，Midi会被放在名字为"`Local Midis`"(若有开启[总设置-第2项](mainSetting/)，则专辑名字为"本地Midi")的专辑内

- - 关于Midi

- - - [什么是Midi](https://baike.baidu.com/item/MIDI/217824)

- 音源导入

- - 在文件管理器中找到音源文件，然后选择用TouHouMix打开即可成功导入

- - 找到需要导入的音源文件(后缀名为".sf2")并将其移动至`[游戏文件目录]`下的Sf2文件夹中下即可

- - 若要启用音源文件请在游戏[总设置-第4项](mainSetting/)中选择该音源文件

- - 关于音源

- - - [什么是音源](https://baike.baidu.com/item/Sound%20Font)

- 皮肤制作

- - 你需要准备的东西有:

- - - short贴图  (`short.png`)

- - - instant贴图  (`instant.png`)

- - - long头部贴图  (`long-b.png`)

- - - long中部贴图  (`long-f.png`)

- - - long尾部贴图  (`long-t.png`)

- - - instant连接线贴图  (`instant-c.png`)

- - - short连接线贴图  (`short-c.png`)

- - - 被连接线连接的非并排instant贴图  (`instant-c.png`)

- - - - 以上图片均需为png格式(可能不用)，如果缺失部分图片，并不会导致任何bug，只是游戏会显示不出没有的内容(比如没有short贴图，玩的时候就看不见任何short，但它还是会照样下落，但是若被连接线连接的非并排instant贴图缺失，会用instant贴图替代)

- - 将贴图分别命名，命名内容看步骤一的括号

- - 将贴图放于同一文件夹下，文件夹的名称就是该皮肤在游戏中显示的名称

- 皮肤导入

- - 将做好的皮肤文件连同文件夹一起复制或剪切到`[游戏文件目录]`下的`Skins`文件夹中，然后打开游戏

- - 若是要导入别人制作的皮肤包，则一般需先解压文件，若文件解压后是单个文件夹且文件夹内包含数个格式为PNG的图片，则直接将文件夹整个移到`[游戏文件目录]`下的Skins文件夹下即可
`
- - 若导入的是别人制作的皮肤包，且文件解压后为一个名字为Android文件夹，且文件夹下还有文件夹，则一般只需将其移到`[内部储存]`下即可

- - 在[游戏设置-第3栏-第2项](gameSetting/##3)即可更换已导入的皮肤，皮肤名为皮肤文件所在文件夹的名称

- _[返回菜单](#menu)_

---

<span id="4"></span>

## 第四部分 常见问题

- 观前提醒：各个常见问题的解决措施均按照推荐的顺序排列，请放心尝试

- 注册

- - 接收不到验证码

- - - 请确认输入位置是否正确

- - - 这可能是网络或者发送速度的问题，请多试几次

- - - 如果不是网络问题或发送速度问题的话，可以试试换个邮箱进行注册，比如QQ邮箱

- - - 如果以上方法均无效，那么可以请别人来帮忙注册

- - 验证码提示错误

- - - 检查输入的验证码是否正确

- - - 保持网页开启状态并重新获取一次验证码

- - - 用另一台设备来辅助注册

- - - 请别人帮忙注册

- 网络

- - 在游戏内无法连上服务器或登陆账号

- - - 看看进入游戏时延迟是否有数值，如果有就多等等或关闭[总设置-第2项](mainSetting/)并重启游戏

- - - 检查游戏内设置是否正常，可更改总设置中的Network Endpoint并重启游戏

- - - 请检查自己的网络状态是否正常

- - - 如果以上方法均无效，那就请尝试使用数据流量或者VPN

- - - 如果仍连不上服务器则为服务器问题，请放弃治疗

- - 无法在Midi商店内Midi

- - - 试试问题一的解决方案

- - - 如果都不行的话，请在玩家交流群中下载Midi整合包

- - 语言选择中文却没有中文

- - - 重启一次游戏或返回上一页面再回来

- - - 请先确认是否能连接上服务器，屏幕顶部的延迟要是显示出来了一般就代表已经成功连接上服务器，如果连接不上服务器，请看问题一

- - - 如果不是网络问题的话呢，可以多等一会或重启游戏几次

- 游戏

- - 游戏难度太低

- - - 进入歌曲信息界面后，直接在屏幕左上角的难度选框中选择除custom以外的难度，或选择custom并进入游戏设置手动调整参数

- - - 也可以在音轨界面多选择几条音轨

- - - 若还是太简单的话，不是曲子本身简单就是你太强了

- - 无法正常进入游戏

- - - 如果反复尝试后均提示TouhouMix无响应，请尝试清除应用数据或更换旧版本后重试

- - - 如果TouhouMix会因为一些特殊原因无法启动(如因为没有开启网络而无法启动)，请确认自己的安装渠道是否安全

- - - - ***请尽可能的在群/Testflight/官网获取游戏***

- - - 如果是iOS系统，可尝试关闭网络再进入游戏

- - - 如果以上方法均无效，请联系开发者

- - 专辑界面空白或界面重叠

- - - 删除"`[游戏文件目录]/JsonStorage`"，并重启游戏。该操作会重置游戏设置

- - - 点击右上角设置内的清除资源包

- - - 在手机设置的应用管理中找到TouhouMix并删除应用数据，该操作会删除所有游戏文件

- - - 卸载重装游戏

- - 游戏卡顿、掉帧或有杂音

- - - 清理内存（是内存不是存储）

- - - 重启游戏

- - - 尝试更改[总设置-第7项](mainSetting/)和[总设置-第8项](mainSetting/)

- - - 更换性能更强的设备

- - 设置改完后怎么会被还原

- - - 某些特殊情况

- - 已下载的Midi能不能删除

- - - 目前游戏内还没有提供给玩家删除Midi的方法，推荐使用清除应用数据的方式删除Midi

- - - 在游戏中查看想要删除的Midi的ID(ID查看方法见第二部分)，然后在`[游戏文件目录]`中的`Webcache`文件夹下找到名字为想要删除的Midi的ID的文件并将其删除。同时，你还需要在`[游戏文件目录]`中的Midis文件夹下找到该Midi的信息文件并删除（其对应的Midi信息文件中的hash值为Midi文件名字），否则无法再次下载此Midi

- - instant间的连接线能否关闭

- - - 连接线纯属摆设，如果觉得碍眼，可以关掉[游戏设置-第8栏-第1-2项](gameSetting/##8)

- - 专辑界面的立绘能否更换

- - - 不能，立绘会自动更换，更换机制请看游戏UI介绍的关于立绘的补充介绍部分

- - 音符间的距离太近或重叠

- - - 查看是不是轨道数量的问题，若轨道数量太大，相邻音符之间的间距会很小甚至重叠；可尝试调小轨道数量(例如调成12)

- - - 如果不是轨道数量问题的话，可能是手指最大移动速度([游戏设置-第7栏-第6项](gameSetting/##7))的设置问题，此设置项数值太小会使音符之间距离被拉近，可以尝试调大(例如10000)

- - - 将[游戏设置-第7栏-第4项](gameSetting/##7)数值略微调大，比如0.1，使两个重叠的short变为一个short与一个instant

- - - 将[游戏设置-第7栏-第3项](gameSetting/##7)数值调小，例如2，使重叠的并排short更容易对付

- - - 将[游戏设置-第7栏-第2项](gameSetting/##7)的数值调大，例如1000，使long不生成

- - - 如果仍不行可适当调大[游戏设置-第7栏-第7项](gameSetting/##7)的数值

- - 按键特效晃眼，能否关闭

- - - 如果说的是那个爆炸特效的话，请移步[游戏设置-第10栏-第3、5、7、9项](gameSetting/##10)然后将其后面的数字改为0就能隐藏爆炸特效了，如果只是想调小的话就按照自己的感觉输入吧

- - - 如果您说的是那个光柱特效，那么可将[游戏设置-第10栏-第1项](gameSetting/##10)调为0

- - 垃圾翻译，能否关闭

- - - 可以，请看本教程第二部分的[总设置-第2项](mainSetting/)

- _[返回菜单](#menu)_

---

- Markdown版近期更新内容:修正了上千个语法错误，修改了一些错误/累赘叙述，进行了一些细微改动

- Markdown2.01版更新内容:修正了语法错误(语文上的)，修正错误叙述，增加跳转链接，修正可能导致严重后果的叙述，暂时删除了官网部分

- 本教程由`[Zhaoym233]`在`[Yang_]`制作的教程的基础上将其改编，并且上传至GithubPage，提供更新
